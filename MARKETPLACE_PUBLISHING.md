# SQL Helper - VS Marketplace Publishing Guide

## Pre-Publishing Checklist

✅ Compile successful
```bash
npm run compile
```

✅ Linting passed
```bash
npm run lint
```

✅ Tests passed
```bash
npm test
```

✅ Version updated in package.json
- Current version: **0.5.2**

✅ CHANGELOG.md updated
✅ RELEASE_NOTES.md created
✅ Git commit and tag created
- Commit: `707df59`
- Tag: `v0.5.2`

---

## Publishing Steps

### Option 1: Using VS Code Extension Manager (Recommended)

#### 1. Install VSCE (if not already installed)
```bash
npm install -g vsce
```

#### 2. Verify Your Publisher Account
- Go to: https://marketplace.visualstudio.com/manage/publishers/marcosgdz03
- Ensure you're logged in with the correct account

#### 3. Generate Personal Access Token (if needed)
- Visit: https://dev.azure.com/marcosgdz03/_usersSettings/tokens
- Create new token with these scopes:
  - `Marketplace` → `Manage`
  - `Marketplace` → `Publish`
- Copy the token and save it securely

#### 4. Login to VSCE
```bash
vsce login marcosgdz03
# When prompted, paste your Personal Access Token
```

#### 5. Package the Extension
```bash
cd /home/marc/sql-java-helper
vsce package
```

This creates `sql-helper-0.5.2.vsix` file

#### 6. Publish to Marketplace
```bash
vsce publish
```

Or publish a specific VSIX file:
```bash
vsce publish --packagePath ./sql-helper-0.5.2.vsix
```

#### 7. Verify Publication
- Wait 5-10 minutes for processing
- Check: https://marketplace.visualstudio.com/items?itemName=marcosgdz03.sql-helper

---

### Option 2: Manual Upload via Web

1. Go to: https://marketplace.visualstudio.com/manage/publishers/marcosgdz03
2. Click "New Extension" → "SQL Helper"
3. Upload the `.vsix` file generated by `vsce package`
4. Fill in:
   - **Overview:** (auto-filled from README)
   - **Changelog:** Link to RELEASE_NOTES.md
   - **Repository:** https://github.com/marcosgdz03/sql-helper
   - **License:** MIT
   - **Icon:** (check if updated)
   - **Q&A:** Enable Q&A option

---

## After Publishing

### Update GitHub Repository
```bash
# Push commit and tags
cd /home/marc/sql-java-helper
git push origin main
git push origin v0.5.2
```

### Create GitHub Release
1. Go to: https://github.com/marcosgdz03/sql-helper/releases
2. Click "Create a new release"
3. Tag: `v0.5.2`
4. Title: `SQL Helper v0.5.2 - Major Code Quality Improvements`
5. Description:
   - Copy from RELEASE_NOTES.md
   - Or use the commit message
6. Attach VSIX file:
   - Click "Attach binaries by dropping them here or selecting them"
   - Upload `sql-helper-0.5.2.vsix`
7. Click "Publish release"

---

## Verification Commands

### Check Package Integrity
```bash
# Unzip and verify contents
unzip -l sql-helper-0.5.2.vsix | head -20

# Check manifest
unzip -p sql-helper-0.5.2.vsix extension/package.json | jq '.version'
```

### Verify on Marketplace
```bash
# Check extension on marketplace
curl -s https://marketplace.visualstudio.com/items?itemName=marcosgdz03.sql-helper | grep "0.5.2"
```

---

## Troubleshooting

### Issue: "Authentication failed"
**Solution:**
```bash
vsce logout
vsce login marcosgdz03
# Re-enter your Personal Access Token
```

### Issue: "Version already exists"
**Solution:**
- Update version in package.json
- Run: `npm run compile` and `npm test`
- Publish again

### Issue: "Publisher mismatch"
**Ensure in package.json:**
```json
"publisher": "marcosgdz03"
```

### Issue: "Missing files"
**Check .vscodeignore excludes:**
```bash
cat .vscodeignore
```

Should exclude:
- `.git`
- `.github`
- `node_modules`
- `src/test`
- etc.

---

## Important Notes

### Version Management
- VS Marketplace doesn't allow re-publishing same version
- Always increment version before publishing
- Follow semver: MAJOR.MINOR.PATCH

### Changelog Updates
- Marketplace shows CHANGELOG.md
- Update before each release
- Link to detailed RELEASE_NOTES.md for full details

### Repository Link
- Marketplace displays link to repository
- Ensure repository is public
- Include proper LICENSE file

### Icon & Screenshots
- Icon should be in `icon.png` (at least 128x128)
- Screenshots should be in `.github/assets/` or similar
- Update marketplace if icon/screenshots change

---

## Rollback (If Needed)

If you need to unpublish:
```bash
# Deprecate current version
vsce unpublish marcosgdz03.sql-helper --version 0.5.2
```

Then republish previous version or create a patch.

---

## Timeline

- **Commit created:** January 17, 2026
- **Tag created:** v0.5.2
- **Expected publication time:** 5-10 minutes
- **Expected marketplace visibility:** Immediate (after processing)

---

## Final Checklist Before Publishing

- [ ] Version updated (0.5.2)
- [ ] `npm run compile` passes
- [ ] `npm run lint` passes (0 new warnings)
- [ ] `npm test` passes
- [ ] CHANGELOG.md updated
- [ ] RELEASE_NOTES.md created
- [ ] Git commit made
- [ ] Git tag created (v0.5.2)
- [ ] README.md current
- [ ] LICENSE.md in place
- [ ] Icon updated (if needed)
- [ ] .vscodeignore configured

---

## Next Release

For v0.5.3 or later:
1. Update version in package.json
2. Update CHANGELOG.md with new entries
3. Create RELEASE_NOTES-0.5.3.md (optional)
4. Follow same publishing steps

---

**Last Updated:** January 17, 2026  
**Publisher:** marcosgdz03  
**Extension ID:** marcosgdz03.sql-helper
